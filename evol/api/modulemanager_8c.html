<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>evol: src/core/modulemanager.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">evol
   </div>
   <div id="projectbrief">A modular game engine built in C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_aebb8dcc11953d78e620bbef0b9e2183.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">modulemanager.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="vec_8h_source.html">evol/common/types/vec.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="modulemanager_8h_source.html">evol/core/modulemanager.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="lualoader_8h_source.html">evol/core/lualoader.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="filesystem_8h_source.html">evol/utils/filesystem.h</a>&gt;</code><br />
<code>#include &lt;src/lua/modulesystem.lua.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for modulemanager.c:</div>
<div class="dyncontent">
<div class="center"><img src="modulemanager_8c__incl.png" border="0" usemap="#asrc_2core_2modulemanager_8c" alt=""/></div>
<map name="src_2core_2modulemanager_8c" id="asrc_2core_2modulemanager_8c">
<area shape="rect" title=" " alt="" coords="282,5,457,32"/>
<area shape="rect" href="vec_8h.html" title=" " alt="" coords="5,229,176,256"/>
<area shape="rect" href="modulemanager_8h.html" title=" " alt="" coords="464,80,645,107"/>
<area shape="rect" href="lualoader_8h.html" title=" " alt="" coords="299,80,440,107"/>
<area shape="rect" href="filesystem_8h.html" title=" " alt="" coords="128,80,275,107"/>
<area shape="rect" title=" " alt="" coords="669,80,848,107"/>
<area shape="rect" title=" " alt="" coords="59,304,122,331"/>
<area shape="rect" href="ev__types_8h.html" title=" " alt="" coords="231,155,398,181"/>
<area shape="rect" href="resdef_8h.html" title=" " alt="" coords="590,229,719,256"/>
<area shape="rect" href="module_8h.html" title=" " alt="" coords="487,155,617,181"/>
<area shape="rect" title=" " alt="" coords="276,304,340,331"/>
<area shape="rect" title=" " alt="" coords="200,229,275,256"/>
<area shape="rect" href="sds_8h_source.html" title=" " alt="" coords="349,229,469,256"/>
<area shape="rect" href="ev__macros_8h.html" title=" " alt="" coords="568,304,747,331"/>
<area shape="rect" href="evolresults_8h.html" title=" " alt="" coords="771,304,970,331"/>
<area shape="rect" title=" " alt="" coords="457,304,543,331"/>
<area shape="rect" title=" " alt="" coords="365,304,433,331"/>
</map>
</div>
</div>
<p><a href="modulemanager_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9de55a0ffe18b87a108147f0f240f92d"><td class="memItemLeft" align="right" valign="top"><a id="a9de55a0ffe18b87a108147f0f240f92d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sdsveccopy</b> (sds *dst, const sds *src)</td></tr>
<tr class="separator:a9de55a0ffe18b87a108147f0f240f92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a030d811bc2d846707820be8990aaca9c"><td class="memItemLeft" align="right" valign="top"><a id="a030d811bc2d846707820be8990aaca9c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sdsvecdestr</b> (sds *elem)</td></tr>
<tr class="separator:a030d811bc2d846707820be8990aaca9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeedb10da97a6eff9c1abc5d5da24b17"><td class="memItemLeft" align="right" valign="top">EvModuleManagerResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modulemanager_8c.html#afeedb10da97a6eff9c1abc5d5da24b17">ev_modulemanager_detect</a> (const char *module_dir)</td></tr>
<tr class="memdesc:afeedb10da97a6eff9c1abc5d5da24b17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search module directory for valid modules and store them for future reference.  <a href="modulemanager_8c.html#afeedb10da97a6eff9c1abc5d5da24b17">More...</a><br /></td></tr>
<tr class="separator:afeedb10da97a6eff9c1abc5d5da24b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68753525309f7783c539aa913d223777"><td class="memItemLeft" align="right" valign="top">evolmodule_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modulemanager_8c.html#a68753525309f7783c539aa913d223777">ev_modulemanager_openmodule_w_name</a> (const char *modname)</td></tr>
<tr class="memdesc:a68753525309f7783c539aa913d223777"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a module from the modules directory. Searches by name.  <a href="modulemanager_8c.html#a68753525309f7783c539aa913d223777">More...</a><br /></td></tr>
<tr class="separator:a68753525309f7783c539aa913d223777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aeb1411bd949ddd03ff59cdbb2ecc01"><td class="memItemLeft" align="right" valign="top">evolmodule_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modulemanager_8c.html#a5aeb1411bd949ddd03ff59cdbb2ecc01">ev_modulemanager_openmodule_w_category</a> (const char *modcategory)</td></tr>
<tr class="memdesc:a5aeb1411bd949ddd03ff59cdbb2ecc01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a module from the modules directory. Searches by category.  <a href="modulemanager_8c.html#a5aeb1411bd949ddd03ff59cdbb2ecc01">More...</a><br /></td></tr>
<tr class="separator:a5aeb1411bd949ddd03ff59cdbb2ecc01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1332865faffeb6d570dbf5350dd523f7"><td class="memItemLeft" align="right" valign="top">evolmodule_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modulemanager_8c.html#a1332865faffeb6d570dbf5350dd523f7">ev_modulemanager_openmodule</a> (const char *module_query)</td></tr>
<tr class="memdesc:a1332865faffeb6d570dbf5350dd523f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a module from the modules directory. Searches by both category and name.  <a href="modulemanager_8c.html#a1332865faffeb6d570dbf5350dd523f7">More...</a><br /></td></tr>
<tr class="separator:a1332865faffeb6d570dbf5350dd523f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="afeedb10da97a6eff9c1abc5d5da24b17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeedb10da97a6eff9c1abc5d5da24b17">&#9670;&nbsp;</a></span>ev_modulemanager_detect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EvModuleManagerResult ev_modulemanager_detect </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module_dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search module directory for valid modules and store them for future reference. </p>
<p>Modules are considered valid if:</p><ol type="1">
<li>They implement a <code>char *getMetadata()</code> function</li>
<li><code>getMetadata()</code> returns a string representing a valid Lua table</li>
</ol>
<p>After loading the metadata of all valid modules, dependencies are checked to make sure that all module dependencies are fulfilled.</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>If successful, <code>EV_MODULEMANAGER_SUCCESS</code> is returned.</li>
<li>If dependency validation fails, <code>EV_MODULEMANAGER_ERROR_DEPENDENCY_INVALID</code> is returned </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="modulemanager_8c_source.html#l00032">32</a> of file <a class="el" href="modulemanager_8c_source.html">modulemanager.c</a>.</p>

</div>
</div>
<a id="a1332865faffeb6d570dbf5350dd523f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1332865faffeb6d570dbf5350dd523f7">&#9670;&nbsp;</a></span>ev_modulemanager_openmodule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evolmodule_t ev_modulemanager_openmodule </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module_query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a module from the modules directory. Searches by both category and name. </p>
<p>The <code>module_query</code> can either be a category or a name. If it is the name then the modulesystem will look for a module that has the same name. If it's a category, then the modulesystem returns any module that matches the category.</p>
<p>Due to modules internally being dynamic libraries, the operating system keeps a refcount for the number of places where they're used. Thus, calling this function doesn't guarantee that that the module will be loaded into memory as it may already be there, making the function simply return the same module and increase its refcount.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">module_query</td><td>Identifier for the module.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>If the module was found and successfully loaded, then it is returned.</li>
<li>If the process fails, <code>NULL</code> is returned. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="modulemanager_8c_source.html#l00101">101</a> of file <a class="el" href="modulemanager_8c_source.html">modulemanager.c</a>.</p>

</div>
</div>
<a id="a5aeb1411bd949ddd03ff59cdbb2ecc01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aeb1411bd949ddd03ff59cdbb2ecc01">&#9670;&nbsp;</a></span>ev_modulemanager_openmodule_w_category()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evolmodule_t ev_modulemanager_openmodule_w_category </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>modcategory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a module from the modules directory. Searches by category. </p>
<p>Due to modules internally being dynamic libraries, the operating system keeps a refcount for the number of places where they're used. Thus, calling this function doesn't guarantee that that the module will be loaded into memory as it may already be there, making the function simply return the same module and increase its refcount.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">modcategory</td><td>Category wanted for the module</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>If the module was found and successfully loaded, then it is returned.</li>
<li>If the process fails, <code>NULL</code> is returned. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="modulemanager_8c_source.html#l00085">85</a> of file <a class="el" href="modulemanager_8c_source.html">modulemanager.c</a>.</p>

</div>
</div>
<a id="a68753525309f7783c539aa913d223777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68753525309f7783c539aa913d223777">&#9670;&nbsp;</a></span>ev_modulemanager_openmodule_w_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evolmodule_t ev_modulemanager_openmodule_w_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>modname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a module from the modules directory. Searches by name. </p>
<p>Due to modules internally being dynamic libraries, the operating system keeps a refcount for the number of places where they're used. Thus, calling this function doesn't guarantee that that the module will be loaded into memory as it may already be there, making the function simply return the same module and increase its refcount.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">modname</td><td>Name of the module</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>If the module was found and successfully loaded, then it is returned.</li>
<li>If the process fails, <code>NULL</code> is returned. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="modulemanager_8c_source.html#l00069">69</a> of file <a class="el" href="modulemanager_8c_source.html">modulemanager.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
